README

QMUL_Thesis was created by Maeve McMahon on 23/05/19 to enable Psychology PhD candidates at QMUL to produce dissertations using R Markdown. You should be familiar with R Notebooks before using this.

The main directory is titled /QMUL_Thesis and can be retitled to whatever you like e.g. "McMahon_Thesis". There are two subdirectories: /Data and /External_images. /Data is where raw data (usually in csv format) is read from in each chapter. /External_images is where external images such as jpgs and pdfs are read from in each chapter.

In the main directory, there are a number of necessary files. 

1) master.Rmd - This is the master document that controls the child documents. It contains the YAML to produce the final pdf. It is an R Markdown file, which is "knit" together, processed using Latex, which produces the final pdf. The YAML contains everything that I needed to produce the document I wanted and that satisfies the QMUL requirements in terms of text only on one side of the page, margins, etc... 

Within the master.Rmd document YAML, there are referenes to "library.bib" and "apa-mcmahon.csl". These will be addressed later. Under the YAML is a series of R chunks. These are in an appropriate order and contain all necessary documents for a QMUL thesis. They are: Originality, Abstract, listoftables/listoffigures (both of which are auto-populated by the knitting process), Abbreviations, Acknowledgements, Content chapters (Chapter1 and Discussion), References (auto-populated by knitting) and AppendixA (if required).

You'll see in the main directory that these Chapters all have their own .Rmd files. Edit them as necessary.

2) library.bib and apa-mcmahon.csl - You'll need to force your referencing software to create a .bib file of ALL references you use (I use Mendeley and forced it to push every reference in my entire library and to auto-update this with new references as I added them). This must be called "library.bib" and be placed in the main directory. Additionally, in the master.Rmd YAML you must call some .csl file. I created apa-mcmahon.csl but you can look for alternatives online for whatever style you want.

Your referencing software should include the ability to set citation keys. I've told Mendeley to create them using Authordate. These are unique keys - each reference has its own. In the text of each content/chapter .Rmd files, you can "call" a reference using [@Authordate]. This contains more in-text citation examples: https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html

3) Main Chapter .Rmd files - In Chapter1.Rmd you'll find a series of options including tables, external images, and graphs produced within R. The \chaptermark option set under the main title is convenient for setting a header for each chapter.

Tables - These must be written in Latex and are extremely ugly. I use this website: https://www.tablesgenerator.com/. Be sure to use \begin, \centering \caption, \label, \begin lines, and always finish with \end{tabular}, \end{table}. These are not autogenerated correctly by the website. Within the \caption line, this is the table name that will be shown both above the table and in the list of table names. The \label line should contain a meaningful label as you'll use it in your text to reference the table.

External images - I can't remember if I got jpgs to work but all of my images are pdfs and the code is very simple (see Introduction in Chapter1.Rmd).

Graphs from R - A single R chunk can be used to process data and produce a graphic. Be sure to call the graphic at the end rather than just saving it to the environment. The headers for graphs are fiddly but use the example in Results in Chapter1.Rmd. fig.width and fig.height can be manually adjusted as necessary (it's set to a sensible default in the master.Rmd YAML). 

All of the above (tables, external images and graphs from R) can be called using \autoref{labelhere}.

Other R code - Note that you can run R code to pre-process data outside figure chunks. I often like to do this at the very start of a chapter so that it flows better when you get to the Results section.

HOW TO MAKE IT GO: 
- Put data in /Data.
- Read and process that data (using relative directory paths rather than absolute paths) in a chapter .Rmd file.
- Go to master.Rmd and make sure that the child files are all present and have been saved as up-to-date. Note that R will not auto-save your child .Rmd files before knitting them.
- Click "Knit" under the file tabs.
- Watch progress in the RMarkdown tab in the Console. Look for your complete .pdf to appear in the main directory titled "master.pdf".

TROUBLESHOOTING: 
- If you're getting ??s in your text when using \autoref{}, check for typos. Also check to make sure there is a line break (a full empty line) before and after every R chunk. It doesn't read it correctly if there isn't.
